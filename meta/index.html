<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Meta Summary Stats</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .scrolly{display:flex;gap:1.5rem;margin-block:4rem}
    .scrolly>.story,.scrolly>.graphic{flex:1}
    .scrolly--flip{flex-direction:row-reverse}
    .sticky{position:sticky;top:1rem;height:55vh}
    .step{padding:1vh 0;max-width:34rem;line-height:1.45}
  </style>
  <script src="../global.js" type="module" defer></script>
</head>
<body>
    <script type="module" src="main.js"></script>
    <div class="filter-controls">
      <label for="commit-progress" style="flex: 1;">
        Show commits until:
        <input
          type="range"
          id="commit-progress"
          min="0"
          max="100"
          value="100"
          style="width: 100%; margin: 0 1rem;"
        />
      </label>
      <time id="slider-time" style="margin-left: auto; font-weight: bold;"></time>

    </div>
    

    <section class="summary-stats">
        <div class="stat">
          <div class="stat-value" id="stat-commits">--</div>
          <div class="stat-label">COMMITS</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="stat-loc">--</div>
          <div class="stat-label">TOTAL LOC</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="stat-time">--</div>
          <div class="stat-label">TIME OF DAY</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="stat-file">--</div>
          <div class="stat-label">NUMBER OF FILE</div>
        </div>
    </section>
    <!-- ───────── scrolly-1：左文右图 ───────── -->
    
    <div id="scrolly-1" class="scrolly">
      <div id="scatter-story" class="story"> 
        <h2>Commits by time of day</h2>
        <p class="lead">Scroll down to see the project evolve.</p>
        <div id="steps-1"></div>  <!-- JS 生成 .step -->
      </div>
      <div id="scatter-plot" class="graphic sticky">
        <div id="chart"></div>
        <p id="selection-count">No commits selected</p>
        <dl id="language-breakdown" class="breakdown"></dl>
      </div>
    </div>

    <!-- ───────── scrolly-2：左图右文 ───────── -->
    <div id="scrolly-2" class="scrolly">
  
      <!-- graphic 先写，自动落在左边 -->
      <div class="graphic sticky" id="file-viz-plot">
        <dl id="files"></dl>
      </div>
    
      <!-- story 后写，落在右边 -->
      <div id="scatter-story" class="story"> 
        <h2>The race between files</h2>
        <div id="steps-2"></div>
      </div>
    </div>

    <!-- tooltip (unchanged) -->
    <div
      id="commit-tooltip"
      hidden
      style="position: absolute; pointer-events: none; background: white; border: 1px solid #ccc; padding: 0.5em; border-radius: 4px; font-size: 0.9em; line-height: 1.3;"
    >
      <dl style="margin: 0;">
        <dt>Commit:</dt><dd><a id="commit-link" href="" target="_blank" rel="noopener">—</a></dd>
        <dt>Date:</dt><dd id="commit-date">—</dd>
        <dt>Time:</dt><dd id="commit-time">—</dd>
        <dt>Author:</dt><dd id="commit-author">—</dd>
        <dt>Lines:</dt><dd id="commit-lines">—</dd>
      </dl>
    </div>
    <script type="module" src="main.js" defer></script>
</body>
</html>
